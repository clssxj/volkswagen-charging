# æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç«¯ (ç§»åŠ¨æµè§ˆå™¨)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               Vue 3 H5 åº”ç”¨                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚  åœ°å›¾è§†å›¾   â”‚  â”‚  å……ç”µè§†å›¾   â”‚  â”‚  æ”¯ä»˜è§†å›¾   â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚         Pinia çŠ¶æ€ç®¡ç†                       â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ APIæœåŠ¡  â”‚  â”‚  åœ°å›¾SDK  â”‚  â”‚  WebSocket   â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚           â”‚           â”‚
                â–¼           â–¼           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  RESTful  â”‚ â”‚ WebSocketâ”‚ â”‚é«˜å¾·åœ°å›¾APIâ”‚
        â”‚    API    â”‚ â”‚  æœåŠ¡å™¨   â”‚ â”‚          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚           â”‚
                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   åç«¯æœåŠ¡é›†ç¾¤     â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
            â”‚  â”‚  ä¸šåŠ¡é€»è¾‘å±‚  â”‚ â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
            â”‚  â”‚  æ•°æ®è®¿é—®å±‚  â”‚ â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    æ•°æ®å­˜å‚¨å±‚     â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â” â”‚
            â”‚  â”‚MySQLâ”‚ â”‚Redisâ”‚ â”‚
            â”‚  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜ â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—ï¸ å‰ç«¯æ¶æ„

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è¡¨ç°å±‚ (Presentation)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       Vue 3 ç»„ä»¶                  â”‚  â”‚
â”‚  â”‚  - MapView.vue                   â”‚  â”‚
â”‚  â”‚  - StationDrawer.vue             â”‚  â”‚
â”‚  â”‚  - ChargingView.vue              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          çŠ¶æ€ç®¡ç†å±‚ (State)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       Pinia Stores               â”‚  â”‚
â”‚  â”‚  - appStore (å…¨å±€çŠ¶æ€)            â”‚  â”‚
â”‚  â”‚  - stationStore (å……ç”µç«™çŠ¶æ€)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æœåŠ¡å±‚ (Services)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  - amapService (åœ°å›¾æœåŠ¡)         â”‚  â”‚
â”‚  â”‚  - wsService (WebSocketæœåŠ¡)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ•°æ®è®¿é—®å±‚ (API)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  - request (HTTPå®¢æˆ·ç«¯)           â”‚  â”‚
â”‚  â”‚  - stationApi (å……ç”µç«™API)         â”‚  â”‚
â”‚  â”‚  - mockData (Mockæ•°æ®)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆé€‰å‹ç†ç”±

#### Vue 3 + Composition API
- **ä¼˜åŠ¿**ï¼šæ›´å¥½çš„TypeScriptæ”¯æŒã€æ›´çµæ´»çš„ä»£ç ç»„ç»‡ã€æ›´å¥½çš„æ€§èƒ½
- **é€‚ç”¨åœºæ™¯**ï¼šå¤æ‚çš„çŠ¶æ€ç®¡ç†å’Œä¸šåŠ¡é€»è¾‘

#### Pinia
- **ä¼˜åŠ¿**ï¼šè½»é‡çº§ã€å®Œç¾çš„TypeScriptæ”¯æŒã€å¼€å‘å·¥å…·å‹å¥½
- **å¯¹æ¯”Vuex**ï¼šæ›´ç®€æ´çš„APIã€æ›´å¥½çš„æ¨¡å—åŒ–

#### Vite
- **ä¼˜åŠ¿**ï¼šæå¿«çš„å†·å¯åŠ¨ã€å³æ—¶çš„æ¨¡å—çƒ­æ›´æ–°ã€ä¼˜åŒ–çš„æ„å»ºæ€§èƒ½
- **å¯¹æ¯”Webpack**ï¼šå¼€å‘ä½“éªŒæ›´å¥½ã€æ„å»ºé€Ÿåº¦æ›´å¿«

#### TailwindCSS
- **ä¼˜åŠ¿**ï¼šåŸå­åŒ–CSSã€å¿«é€Ÿå¼€å‘ã€ä½“ç§¯ä¼˜åŒ–ã€å“åº”å¼è®¾è®¡
- **é€‚ç”¨åœºæ™¯**ï¼šå¿«é€Ÿæ„å»ºç»Ÿä¸€é£æ ¼çš„UI

#### é«˜å¾·åœ°å›¾
- **ä¼˜åŠ¿**ï¼šå›½å†…åœ°å›¾æ•°æ®æœ€å‡†ç¡®ã€æ–‡æ¡£å®Œå–„ã€åŠŸèƒ½ä¸°å¯Œ
- **å¯¹æ¯”ç™¾åº¦åœ°å›¾**ï¼šæ›´å¥½çš„ç§»åŠ¨ç«¯ä½“éªŒ

## ğŸ“Š æ•°æ®æµ

### çŠ¶æ€ç®¡ç†æµç¨‹

```
ç”¨æˆ·æ“ä½œ
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vue Componentâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ dispatch action
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pinia Store â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ call API
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Layer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ HTTP/WS
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ response
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pinia Store â”‚ â”€â”€mutationâ”€â”€> State Update
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ reactive
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vue Componentâ”‚ â”€â”€renderâ”€â”€> UI Update
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### WebSocketå®æ—¶æ›´æ–°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend   â”‚
â”‚  (æ¨é€æ¶ˆæ¯)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WebSocket    â”‚
â”‚  Connection  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ wsService    â”‚ â”€â”€è§£ææ¶ˆæ¯â”€â”€> 
â”‚ (æ¶ˆæ¯åˆ†å‘)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Event Handlerâ”‚
â”‚ (ä¸šåŠ¡å¤„ç†)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pinia Store  â”‚ â”€â”€æ›´æ–°çŠ¶æ€â”€â”€>
â”‚ (çŠ¶æ€æ›´æ–°)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component   â”‚ â”€â”€å¹³æ»‘åŠ¨ç”»â”€â”€> UIæ›´æ–°
â”‚  (å“åº”å¼æ›´æ–°) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ ç»„ä»¶è®¾è®¡

### ç»„ä»¶å±‚æ¬¡ç»“æ„

```
App.vue
â”œâ”€â”€ MapView (åœ°å›¾ä¸»é¡µ)
â”‚   â”œâ”€â”€ MapComponent (åœ°å›¾ç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ Marker (æ ‡è®°)
â”‚   â”‚   â”œâ”€â”€ Cluster (èšåˆ)
â”‚   â”‚   â””â”€â”€ InfoWindow (ä¿¡æ¯çª—)
â”‚   â”œâ”€â”€ SearchBar (æœç´¢æ )
â”‚   â”œâ”€â”€ StationList (ç«™ç‚¹åˆ—è¡¨)
â”‚   â””â”€â”€ StationDrawer (è¯¦æƒ…æŠ½å±‰)
â”‚       â””â”€â”€ ChargerList (å……ç”µæ¡©åˆ—è¡¨)
â”œâ”€â”€ StationDetail (ç«™ç‚¹è¯¦æƒ…é¡µ)
â”‚   â”œâ”€â”€ MiniMap (å°åœ°å›¾)
â”‚   â”œâ”€â”€ PriceInfo (ä»·æ ¼ä¿¡æ¯)
â”‚   â””â”€â”€ ChargerGrid (å……ç”µæ¡©ç½‘æ ¼)
â”œâ”€â”€ ChargingView (å……ç”µé¡µé¢)
â”‚   â”œâ”€â”€ ChargingAnimation (å……ç”µåŠ¨ç”»)
â”‚   â”œâ”€â”€ StatusCard (çŠ¶æ€å¡ç‰‡)
â”‚   â””â”€â”€ DetailList (è¯¦æƒ…åˆ—è¡¨)
â”œâ”€â”€ PaymentView (æ”¯ä»˜é¡µé¢)
â”‚   â”œâ”€â”€ OrderInfo (è®¢å•ä¿¡æ¯)
â”‚   â”œâ”€â”€ PaymentMethod (æ”¯ä»˜æ–¹å¼)
â”‚   â””â”€â”€ SuccessAnimation (æˆåŠŸåŠ¨ç”»)
â””â”€â”€ HistoryView (å†å²è®°å½•)
    â”œâ”€â”€ StatsCard (ç»Ÿè®¡å¡ç‰‡)
    â””â”€â”€ HistoryList (å†å²åˆ—è¡¨)
```

### ç»„ä»¶è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **é«˜å†…èšä½è€¦åˆ**ï¼šç»„ä»¶å†…éƒ¨é€»è¾‘å®Œæ•´ï¼Œç»„ä»¶é—´ä¾èµ–å°‘
3. **å¯å¤ç”¨æ€§**ï¼šé€šç”¨ç»„ä»¶æŠ½ç¦»ï¼Œä¾¿äºå¤ç”¨
4. **å¯æµ‹è¯•æ€§**ï¼šç»„ä»¶é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç¼–å†™æµ‹è¯•

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. é¦–å±åŠ è½½ä¼˜åŒ–

```javascript
// è·¯ç”±æ‡’åŠ è½½
{
  path: '/station/:id',
  component: () => import('@/views/StationDetail.vue')
}

// ç»„ä»¶æ‡’åŠ è½½
const ChargingView = defineAsyncComponent(() =>
  import('@/views/ChargingView.vue')
)

// ä»£ç åˆ†å‰²
export default {
  manualChunks: {
    'vue-vendor': ['vue', 'vue-router', 'pinia'],
    'map-vendor': ['@amap/amap-jsapi-loader']
  }
}
```

### 2. åœ°å›¾æ€§èƒ½ä¼˜åŒ–

```javascript
// æ ‡è®°èšåˆ
new AMap.MarkerClusterer(map, markers, {
  gridSize: 60,
  minClusterSize: 3
})

// è§†å£åŠ è½½
const bounds = map.getBounds()
loadStations(bounds) // ä»…åŠ è½½å¯è§åŒºåŸŸ

// é˜²æŠ–å¤„ç†
debounce(() => {
  loadStations(map.getBounds())
}, 500)
```

### 3. çŠ¶æ€æ›´æ–°ä¼˜åŒ–

```javascript
// å¢é‡æ›´æ–°
function updateStationStatus(updates) {
  updates.forEach(update => {
    const station = stations.find(s => s.id === update.id)
    if (station) {
      Object.assign(station, update) // ä»…æ›´æ–°å˜åŒ–çš„å­—æ®µ
    }
  })
}

// èŠ‚æµæ¨é€
throttle(() => {
  pushStatusUpdate()
}, 1000)
```

### 4. ç¼“å­˜ç­–ç•¥

```javascript
// Service Workerç¼“å­˜
workbox: {
  runtimeCaching: [
    {
      urlPattern: /^https:\/\/webapi\.amap\.com/,
      handler: 'CacheFirst',
      options: {
        cacheName: 'amap-cache',
        expiration: {
          maxEntries: 500,
          maxAgeSeconds: 60 * 60 * 24 * 7
        }
      }
    }
  ]
}
```

## ğŸ”’ å®‰å…¨è®¾è®¡

### 1. APIå®‰å…¨

```javascript
// Tokenè®¤è¯
request.interceptors.request.use(config => {
  const token = localStorage.getItem('token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// è¯·æ±‚ç­¾å
const sign = generateSign(params, secret)
config.headers['X-Sign'] = sign
```

### 2. XSSé˜²æŠ¤

```javascript
// Vueè‡ªåŠ¨è½¬ä¹‰
<div>{{ userInput }}</div> // è‡ªåŠ¨è½¬ä¹‰

// æ‰‹åŠ¨è½¬ä¹‰
function escapeHtml(text) {
  const map = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#039;'
  }
  return text.replace(/[&<>"']/g, m => map[m])
}
```

### 3. æ•°æ®åŠ å¯†

```javascript
// æ•æ„Ÿä¿¡æ¯åŠ å¯†
import CryptoJS from 'crypto-js'

function encrypt(data, key) {
  return CryptoJS.AES.encrypt(data, key).toString()
}

function decrypt(encrypted, key) {
  const bytes = CryptoJS.AES.decrypt(encrypted, key)
  return bytes.toString(CryptoJS.enc.Utf8)
}
```

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

### 1. è§†å£é…ç½®

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
```

### 2. å®‰å…¨åŒºåŸŸé€‚é…

```css
/* é€‚é…iPhoneåˆ˜æµ·å± */
.safe-area-top {
  padding-top: env(safe-area-inset-top);
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}
```

### 3. è§¦æ§ä¼˜åŒ–

```css
/* ç¦ç”¨ç‚¹å‡»é«˜äº® */
* {
  -webkit-tap-highlight-color: transparent;
}

/* ç¦ç”¨é•¿æŒ‰é€‰æ‹© */
.map-container {
  -webkit-user-select: none;
  user-select: none;
}
```

### 4. æ‰‹åŠ¿æ”¯æŒ

```javascript
// åœ°å›¾æ‰‹åŠ¿é…ç½®
{
  dragEnable: true,      // æ‹–æ‹½
  zoomEnable: true,      // ç¼©æ”¾
  touchZoom: true,       // è§¦æ‘¸ç¼©æ”¾
  touchZoomCenter: 1     // åŒæŒ‡ç¼©æ”¾ä¸­å¿ƒç‚¹
}
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•

```javascript
// Storeæµ‹è¯•
describe('Station Store', () => {
  it('should update station status', () => {
    const store = useStationStore()
    store.updateStationStatus([{
      id: 'station_1',
      availableCount: 10
    }])
    expect(store.stations[0].availableCount).toBe(10)
  })
})
```

### 2. ç»„ä»¶æµ‹è¯•

```javascript
// ç»„ä»¶æµ‹è¯•
describe('StationCard', () => {
  it('should render station info', () => {
    const wrapper = mount(StationCard, {
      props: { station: mockStation }
    })
    expect(wrapper.text()).toContain(mockStation.name)
  })
})
```

### 3. E2Eæµ‹è¯•

```javascript
// Playwrightæµ‹è¯•
test('should search and select station', async ({ page }) => {
  await page.goto('/')
  await page.fill('input[placeholder="æœç´¢å……ç”µç«™"]', 'åŒ—äº¬')
  await page.click('text=åŒ—äº¬å•†åœºä¸­å¿ƒå……ç”µç«™')
  await expect(page.locator('.station-detail')).toBeVisible()
})
```

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### 1. æ€§èƒ½ç›‘æ§

```javascript
// Performance API
const loadTime = performance.now()
console.log(`é¡µé¢åŠ è½½æ—¶é—´: ${loadTime}ms`)

// è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡
performance.mark('map-load-start')
// ... åœ°å›¾åŠ è½½
performance.mark('map-load-end')
performance.measure('map-load', 'map-load-start', 'map-load-end')
```

### 2. é”™è¯¯ç›‘æ§

```javascript
// å…¨å±€é”™è¯¯æ•è·
app.config.errorHandler = (err, instance, info) => {
  console.error('Error:', err)
  console.error('Info:', info)
  // ä¸ŠæŠ¥åˆ°ç›‘æ§ç³»ç»Ÿ
  reportError(err, info)
}

// Promiseé”™è¯¯æ•è·
window.addEventListener('unhandledrejection', event => {
  console.error('Unhandled promise rejection:', event.reason)
  reportError(event.reason)
})
```

### 3. æ—¥å¿—ç³»ç»Ÿ

```javascript
// æ—¥å¿—å·¥å…·
class Logger {
  static log(level, message, data) {
    const log = {
      level,
      message,
      data,
      timestamp: new Date().toISOString(),
      userAgent: navigator.userAgent
    }
    
    console[level](message, data)
    
    // ä¸ŠæŠ¥åˆ°åç«¯
    if (level === 'error') {
      this.report(log)
    }
  }
  
  static report(log) {
    fetch('/api/logs', {
      method: 'POST',
      body: JSON.stringify(log)
    })
  }
}
```

## ğŸ”„ ç‰ˆæœ¬ç®¡ç†

### Gitåˆ†æ”¯ç­–ç•¥

```
main (ç”Ÿäº§ç¯å¢ƒ)
  â”‚
  â”œâ”€â”€ develop (å¼€å‘ç¯å¢ƒ)
  â”‚   â”‚
  â”‚   â”œâ”€â”€ feature/map-optimization (åŠŸèƒ½åˆ†æ”¯)
  â”‚   â”œâ”€â”€ feature/payment (åŠŸèƒ½åˆ†æ”¯)
  â”‚   â””â”€â”€ hotfix/map-crash (çƒ­ä¿®å¤åˆ†æ”¯)
  â”‚
  â””â”€â”€ release/v1.0.0 (å‘å¸ƒåˆ†æ”¯)
```

### ç‰ˆæœ¬å·è§„åˆ™

éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ (Semantic Versioning):

- **MAJOR**: ä¸å…¼å®¹çš„APIä¿®æ”¹
- **MINOR**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **PATCH**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

ä¾‹å¦‚: `v1.2.3`

## ğŸ“ æ€»ç»“

æœ¬æ¶æ„è®¾è®¡æ³¨é‡:

1. **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„åˆ†å±‚æ¶æ„å’Œä»£ç ç»„ç»‡
2. **å¯æ‰©å±•æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½
3. **æ€§èƒ½**: å¤šå±‚æ¬¡çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
4. **å®‰å…¨æ€§**: å®Œå–„çš„å®‰å…¨é˜²æŠ¤æœºåˆ¶
5. **å¯æµ‹è¯•æ€§**: å…¨é¢çš„æµ‹è¯•è¦†ç›–
6. **ç”¨æˆ·ä½“éªŒ**: æµç•…çš„äº¤äº’å’Œå¿«é€Ÿçš„å“åº”

é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡ï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚

---

**æ–‡æ¡£ç»´æŠ¤**: æ¶æ„å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2024-10-17

